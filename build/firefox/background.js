!function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}({0:function(e,t,r){"use strict";function o(e){var t,r=(t=(t=(t=(e=(e=e.toString()).toLowerCase()).indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0]).replace(/^www\./,"")).split(".");return r.length>2&&(t=-1!==t.indexOf(".co.")||-1!==t.indexOf(".com.")?r.slice(-3).join("."):r.slice(-2).join(".")),t}r.d(t,"a",function(){return o})},7:function(e,t,r){"use strict";function o(){var e=new XMLHttpRequest;e.open("GET","https://altruisto.com/api/partners"),e.onreadystatechange=function(){if(4==e.readyState&&e.responseText){var t=JSON.parse(e.responseText);browser.storage.local.remove(["partners"]),browser.storage.local.set({partners:t})}},e.send()}r.r(t);var s,a,n,i=r(0);function l(e,t){var r;r=e.secure?"https://":"http://",browser.cookies.remove({url:r+t+e.path,name:e.name})}function c(e){return!!new RegExp(["id=XK9XruzkyUo","8106588"].join("|")).test(e)}function u(e){return-1!=["anrdoezrs.net","commission-junction.com","dpbolvw.net","apmebf.com","jdoqocy.com","kqzyfj.com","qksrv.net","tkqlhce.com","ww.qksz.net","emjcd.com","afcyhf.com","awltovhc.com","ftjcfx.com","lduhtrp.net","tqlkg.com","awxibrm.com","cualbr.com","rnsfpw.net","vofzpwh.com","yceml.net","linksynergy.com"].indexOf(e)}browser.runtime.onInstalled.addListener(function(e){browser.alarms.create("clearClosedWebsites",{periodInMinutes:60}),browser.alarms.create("clearDisabledWebsites",{periodInMinutes:1440}),browser.alarms.create("getPartnersList",{periodInMinutes:1440}),o(),"install"==e.reason&&browser.tabs.create({url:"https://altruisto.com/welcome/"})}),browser.alarms.onAlarm.addListener(function(e){switch(e.name){case"clearClosedWebsites":browser.storage.local.remove(["closedWebsites"]);break;case"clearDisabledWebsites":browser.storage.local.remove(["disabledWebsites"]);break;case"getPartnersList":o()}}),browser.webRequest.onBeforeRequest.addListener(function(e){var t=e.url.split("?url=");!function(e){var t,r,o;0===Object.keys(e).length&&e.constructor===Object||browser.storage.local.get("activatedAffiliates",function(s){if(null!=s.activatedAffiliates){for(t=s.activatedAffiliates,r=0;r<t.length;r++)if(t[r].domain==e.domain){t[r].timestamp=e.timestamp,o=!0;break}o||t.push(e)}else t=new Array(e);browser.storage.local.set({activatedAffiliates:t})})}({domain:Object(i.a)(t[1]),timestamp:e.timeStamp})},{urls:["https://altruisto.com/redirect*"],types:["main_frame"]}),browser.runtime.onMessage.addListener(function(e,t,r){t.tab&&(browser.cookies.getAll({domain:e.domain},function(t){for(var r=0;r<t.length;r++)l(t[r],e.domain);var o;o=e.domain,browser.storage.local.get({activatedAffiliates:[]},function(e){for(let t=0;t<e.activatedAffiliates.length;t++)if(e.activatedAffiliates[t].domain==o){let r=e.activatedAffiliates;r.splice(t,1),browser.storage.local.set({activatedAffiliates:r});break}})}),r({status:!0}))}),a=!1,n=!1,browser.webRequest.onBeforeRedirect.addListener(function(e){var t=Object(i.a)(e.url),r=Object(i.a)(e.redirectUrl),o=e.tabId;(u(t)||u(r))&&(a=!0,c(e.url)||c(e.redirectUrl)?n=!0:s=o)},{urls:["<all_urls>"],types:["main_frame"]}),browser.webRequest.onCompleted.addListener(function(e){var t,r,o=e.tabId;a&&!n?s==o&&(t=Object(i.a)(e.url),r=[],browser.storage.local.get({disabledWebsites:[]},function(e){r=e.disabledWebsites,-1==e.disabledWebsites.indexOf(t)&&(r.push(t),browser.storage.local.set({disabledWebsites:r}))}),a=!1,n=!1,s=0):a&&n&&(a=!1,n=!1)},{urls:["<all_urls>"],types:["main_frame"]})}});